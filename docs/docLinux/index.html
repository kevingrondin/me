<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Linux · Kevin Grondin</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Structure de dossier"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Linux · Kevin Grondin"/><meta property="og:type" content="website"/><meta property="og:url" content="https://kevingrondin.github.io/me/"/><meta property="og:description" content="## Structure de dossier"/><meta property="og:image" content="https://kevingrondin.github.io/me/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://kevingrondin.github.io/me/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/me/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/me/js/scrollSpy.js"></script><link rel="stylesheet" href="/me/css/main.css"/><script src="/me/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/me/"><img class="logo" src="/me/img/favicon.ico" alt="Kevin Grondin"/><h2 class="headerTitleWithLogo">Kevin Grondin</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/me/docs/docBatch" target="_self">Scripts</a></li><li class="siteNavGroupActive siteNavItemActive"><a href="/me/docs/docLinux" target="_self">Tuto</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Linux</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Linux</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/me/docs/docLinux">Un peu de linux</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Linux</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="structure-de-dossier"></a><a href="#structure-de-dossier" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Structure de dossier</h2>
<table>
<thead>
<tr><th>Dossier</th><th style="text-align:left">Description</th></tr>
</thead>
<tbody>
<tr><td>/boot</td><td style="text-align:left">Contient le fichier qui est utilisé par le boot loader (grub.cfg)</td></tr>
<tr><td>/root</td><td style="text-align:left">Le repertoire de l'utilisateur root différent de /</td></tr>
<tr><td>/dev</td><td style="text-align:left">les périphériques</td></tr>
<tr><td>/etc</td><td style="text-align:left">configuration</td></tr>
<tr><td>/bin -&gt; /usr/bin</td><td style="text-align:left">Les commandes quotidienne de l'utilisateur</td></tr>
<tr><td>/sbin -&gt; /usr/sbin</td><td style="text-align:left">commandes système/sytèle de fichier</td></tr>
<tr><td>/opt</td><td style="text-align:left">application complémentaire optionnelle ( pas partie de l'OS )</td></tr>
<tr><td>/proc</td><td style="text-align:left">processus en cour ( n'existe qu'en mémoire )</td></tr>
<tr><td>/lib -&gt; /usr/lib</td><td style="text-align:left">Fichiers de librairie du langage C dont ont besoin les commandes et les applications <code>strace -e open pwd</code></td></tr>
<tr><td>/tmp</td><td style="text-align:left">repertoire temporaires</td></tr>
<tr><td>/home</td><td style="text-align:left">repertoire utilisateur</td></tr>
<tr><td>/var</td><td style="text-align:left">log system</td></tr>
<tr><td>/run</td><td style="text-align:left">Démons système qui démarrent très tôt (systemd, udev ) pour stocker les fichiers d'exécution temporaires comme les fichiers PID</td></tr>
<tr><td>/mnt</td><td style="text-align:left">pour monter un système de fichiers externe</td></tr>
<tr><td>/media</td><td style="text-align:left">CDROM</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="installation-raspberry"></a><a href="#installation-raspberry" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation (Raspberry)</h2>
<p>Télécharger l'image <a href="https://www.raspberrypi.org/downloads/raspbian/">ici</a> la version light est suffisante</p>
<h3><a class="anchor" aria-hidden="true" id="formatter-la-sd"></a><a href="#formatter-la-sd" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Formatter la SD</h3>
<p>Formater depuis un windows avec l'invite de commande</p>
<pre><code class="hljs css language-BATCH">diskpart
list disk
select disk
clean
create partition primary
active
format fs=exfat quick
assign
<span class="hljs-keyword">exit</span>
<span class="hljs-keyword">exit</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="preparer-la-sd"></a><a href="#preparer-la-sd" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Preparer la SD</h3>
<p>Avec rufus ou <a href="https://etcher.io">etcher</a></p>
<h3><a class="anchor" aria-hidden="true" id="configurer-le-wifi-et-ssh-en-avance"></a><a href="#configurer-le-wifi-et-ssh-en-avance" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configurer le wifi et ssh en avance</h3>
<p>créer un fichier à la racine <code>ssh</code> et en même temps <code>wpa_supplicant.conf</code> avec ces infos</p>
<pre><code class="hljs css language-SHELL">country=fr
update_config=1
ctrl_interface=/var/run/wpa_supplicant

network={
 scan_ssid=1
 ssid="nameofnetworknotnetwork5GHZ"
 psk="motdepasse"
}
</code></pre>
<p>Ecrire ces informations en <strong>EOL Unix</strong> avec Notepad++ dans le menu <em>Edit/EOL Conversion</em>, les réseau 5GHZ ne fonctionneras pas.
Aprés chaque redemarrage la configuration seras supprimé</p>
<h2><a class="anchor" aria-hidden="true" id="fixer-une-adresse-ip"></a><a href="#fixer-une-adresse-ip" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fixer une adresse IP</h2>
<pre><code class="hljs css language-SHELL">sudo nano /etc/dhcpcd.conf
</code></pre>
<pre><code class="hljs css language-BASH">interface wlan0
static ip_address=192.168.1.2/24
static routers=192.168.1.1
static domain_name_servers=192.168.1.1
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="mettre-le-clavier-en-français"></a><a href="#mettre-le-clavier-en-français" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Mettre le clavier en français</h2>
<pre><code class="hljs css language-SHELL">sudo raspi-config
</code></pre>
<p>changer les options de locatisations (FR UTF8)</p>
<h2><a class="anchor" aria-hidden="true" id="mettre-à-jour-le-système"></a><a href="#mettre-à-jour-le-système" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Mettre à jour le système</h2>
<pre><code class="hljs css language-batch">sudo su
apt update -y &amp;&amp; apt<span class="hljs-built_in"> upgrade </span>-y &amp;&amp; sudo apt full-upgrade -y
apt install ntpdate
apt install<span class="hljs-built_in"> ntp
</span>apt-<span class="hljs-builtin-name">get</span> install bash-completion
</code></pre>
<p>Changer le mot de passe</p>
<pre><code class="hljs css language-Shell">passwd
</code></pre>
<p>Mettre a jour le Noyau</p>
<pre><code class="hljs css language-Shell">yum update kernel -y
</code></pre>
<p>Activier l'auto-complétion</p>
<pre><code class="hljs css language-Shell">nano /etc/bash.bashrc
</code></pre>
<p>Decommentez les lignes comme ci-dessous</p>
<pre><code class="hljs css language-Bash"><span class="hljs-comment"># enable bash completion in interactive shells</span>
<span class="hljs-keyword">if</span> ! <span class="hljs-built_in">shopt</span> -oq posix; <span class="hljs-keyword">then</span>
  <span class="hljs-keyword">if</span> [ -f /usr/share/bash-completion/bash_completion ]; <span class="hljs-keyword">then</span>
    . /usr/share/bash-completion/bash_completion
  <span class="hljs-keyword">elif</span> [ -f /etc/bash_completion ]; <span class="hljs-keyword">then</span>
    . /etc/bash_completion
  <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">fi</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="changer-le-hostname"></a><a href="#changer-le-hostname" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Changer le hostname</h2>
<pre><code class="hljs css language-SHELL">cat /etc/hostname
hostnamectl set-hostname &lt;newname&gt;
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="connexion-avec-clée-ssh"></a><a href="#connexion-avec-clée-ssh" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Connexion avec clée SSH</h2>
<p>Creer votre clée public, et votre clée privée, laissez les double côte</p>
<pre><code class="hljs css language-Shell"><span class="hljs-meta">#</span><span class="bash"> Version secure</span>
ssh-keygen -t rsa -b 4096 -C "email_address"
<span class="hljs-meta">
#</span><span class="bash"> Version basic</span>
ssh-keygen -t rsa -C "email_address"
</code></pre>
<p>Pour tester votre clée avec github, une fois votre clée publique sur github</p>
<pre><code class="hljs css language-Shell">ssh -T git@github.com
</code></pre>
<p>Sous windows</p>
<pre><code class="hljs css language-Shell">type C:\Users\name\.ssh\id_rsa.pub
</code></pre>
<p>Mettre les bon droits au fichier générés</p>
<pre><code class="hljs css language-Shell">sudo chmod 600 ~/.ssh/id_rsa
sudo chmod 600 ~/.ssh/id_rsa.pub
</code></pre>
<p>Envoyé la clée OPENSSH au rasp</p>
<pre><code class="hljs css language-Shell">cat ~/.ssh/id_rsa.pub | ssh &lt;USERNAME&gt;@&lt;IP-ADDRESS&gt; 'mkdir -p ~/.ssh &amp;&amp; cat &gt;&gt; ~/.ssh/authorized_keys'
</code></pre>
<p>Autoriser les authorized_keys dans sshd_config</p>
<pre><code class="hljs css language-Shell">nano /etc/ssh/sshd_config
</code></pre>
<p>et decommentez</p>
<pre><code class="hljs css language-Bash">AuthorizedKeysFile   /.ssh/authorized_keys
</code></pre>
<p>et recharger la config ssh</p>
<pre><code class="hljs css language-Bash">/etc/init.d/ssh force-reload
</code></pre>
<p>vous pouvez vous connectez avec cette ligne de commande</p>
<pre><code class="hljs css language-Shell">ssh -i /root/.ssh/&lt;KEY&gt; &lt;USERNAME&gt;@&lt;IP_ADRESSE&gt;
</code></pre>
<p>Marche aussi avec Rsync</p>
<pre><code class="hljs css language-Shell">rsync -e « ssh -i /root/.ssh/&lt;KEY&gt; » -av &lt;USERNAME&gt;@&lt;IP_ADRESSE&gt;:/source/destination/
</code></pre>
<p>Si vous êtes sur windows vous pouvez utiliser <strong>Pageant</strong> et <strong>wsl-ssh-pageant-amd64-gui</strong> pour ne plus à avoir entrer les clée privé à chaque fois</p>
<p>Dans votre dossier .ssh creer un fichier <em>config</em> sans extension, vous pouvez créer des alias pour vous connectez plus rapidement</p>
<pre><code class="hljs css language-Bash">Host *
   ForwardAgent yes

Host &lt;ALIAS&gt;
   HostName &lt;SERVEUR&gt;
   Port     &lt;PORT&gt;
   User     &lt;USER&gt;
   <span class="hljs-comment"># Tunnel SSH</span>
   <span class="hljs-comment"># ProxyCommand     ssh &lt;USER&gt;@&lt;SERVEUR&gt; -W %h:%p</span>
</code></pre>
<p>Sur unix dans votre dossier <strong>home</strong></p>
<pre><code class="hljs css language-Bash">nano ~/.ssh/config
chmod 600 ~/.ssh/config
chown <span class="hljs-variable">$USER</span> ~/.ssh/config
</code></pre>
<p>dans <em>~/.ssh</em> creer un fichier config de la même façon que pour windows pour les racourcis</p>
<h2><a class="anchor" aria-hidden="true" id="vscode-server-ne-fonctionne-pas-sur-des-architectures-arm"></a><a href="#vscode-server-ne-fonctionne-pas-sur-des-architectures-arm" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>VSCODE server (ne fonctionne pas sur des architectures arm)</h2>
<pre><code class="hljs css language-Shell">sudo apt-get install libx11-dev libxkbfile-dev libsecret-1-dev fakeroot rpm
</code></pre>
<p><a href="https://github.com/cdr/code-server">code-server</a></p>
<pre><code class="hljs css language-Shell">docker run -it -p 127.0.0.1:8080:8080 -v "${HOME}/.local/share/code-server:/home/coder/.local/share/code-server" -v "$PWD:/home/coder/project" codercom/code-server:v2
</code></pre>
<p><strong>npm rebuild</strong> dans vscode pour recompiler si des problèmes persistes</p>
<h3><a class="anchor" aria-hidden="true" id="acces-à-distance"></a><a href="#acces-à-distance" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Acces à distance</h3>
<h4><a class="anchor" aria-hidden="true" id="bureau-à-distance"></a><a href="#bureau-à-distance" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Bureau à distance</h4>
<pre><code class="hljs css language-Shell">sudo apt install -y xrdp
</code></pre>
<p>acces depuis windows et mac (rajouter .local pour mac) avec mstsc</p>
<h4><a class="anchor" aria-hidden="true" id="serveur-de-fichier-simple"></a><a href="#serveur-de-fichier-simple" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Serveur de fichier Simple</h4>
<pre><code class="hljs css language-Shell">sudo apt install -y samba
</code></pre>
<blockquote>
<p>configurer samba</p>
</blockquote>
<pre><code class="hljs css language-batch">mkdir /home/pi<span class="hljs-built_in">/shares
</span>chmod 777 /home/shares/public

sudo rm /etc/samba/smb.conf
sudo nano /etc/samba/smb.conf
</code></pre>
<pre><code class="hljs css language-Bash">[global]
        netbios name = server
        server string = server
        workgroup = WORKGROUP
        security = user

[server]
        comment = server
        path = <span class="hljs-string">"/home/pi/shares"</span>
        public = yes
        guest ok = yes
        <span class="hljs-built_in">read</span> only = no
</code></pre>
<pre><code class="hljs css language-Shell">sudo pdbedit -a -u pi
sudo service smbd restart
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="serveur-de-fichier-avancé"></a><a href="#serveur-de-fichier-avancé" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Serveur de fichier Avancé</h4>
<p>Installation de samba</p>
<pre><code class="hljs css language-Shell">sudo apt install -y samba
</code></pre>
<p>On créer un groupe</p>
<pre><code class="hljs css language-Shell">groupadd &lt;group&gt;
</code></pre>
<p>On créer un <user> dans le groupe <group></p>
<pre><code class="hljs css language-Shell">useradd -g &lt;group&gt; &lt;user&gt;
</code></pre>
<p>On lui donne un mot de passe pour samba</p>
<pre><code class="hljs css language-Shell">smbpasswd -a &lt;user&gt;
</code></pre>
<p>On créer un dossier partagé avec les droit adéquat</p>
<pre><code class="hljs css language-Shell">mkdir -p /&lt;partage&gt;/&lt;groupe&gt;
chown -R root:&lt;groupe&gt; /&lt;partage&gt;/&lt;groupe&gt;/
chmod -R 770 /&lt;partage&gt;/&lt;groupe&gt;/
</code></pre>
<p>On historise la configuration par defaut de samba</p>
<pre><code class="hljs css language-Shell">mv /etc/samba/smb.conf /etc/samba/smb.conf.bak
</code></pre>
<pre><code class="hljs css language-Bash">vi /etc/samba/smb.conf

<span class="hljs-comment"># Ajouter la configuration ci-dessous</span>

<span class="hljs-comment">#======================= Global Settings =======================</span>

[global]
workgroup = WORKGROUP
server string = %h
public = yes
security = user
encrypt passwords = <span class="hljs-literal">true</span>

<span class="hljs-comment">#======================= Share Definitions =======================</span>

[&lt;group&gt;]
comment = répertoire du &lt;groupe&gt;
  path = &lt;partage&gt;/&lt;groupe&gt;
  valid users = @&lt;groupe&gt;
  writable = yes
  directory mask = 0770
  create mask = 0770
  force create mode = 0770
</code></pre>
<p>dans <strong>valid users</strong> on écri <em>@groupe1, @groupe2</em> et <em>user1, user2</em></p>
<p>On test si tout es bon</p>
<pre><code class="hljs css language-Shell">testparm smb.conf
</code></pre>
<p>On redemarre si tout est bon</p>
<pre><code class="hljs css language-Shell">/etc/init.d/samba restar
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="installer-nodejs"></a><a href="#installer-nodejs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installer nodejs</h4>
<p>Façon Node</p>
<pre><code class="hljs css language-batch">curl -sL http<span class="hljs-variable">s:</span>//<span class="hljs-keyword">deb</span>.nodesource.<span class="hljs-keyword">com</span>/setup_13.<span class="hljs-keyword">x</span> | sudo -E bash -
sudo apt-<span class="hljs-built_in">get</span> install -<span class="hljs-keyword">y</span> nodejs
sudo npm install -g npm
</code></pre>
<p>Façon linux</p>
<pre><code class="hljs css language-batch">//verfier si arm7 ou plus
cat /proc/cpu<span class="hljs-literal">inf</span>o

// aller sur navigateur web chercher la bonne installation
wget https://nodejs.org/dist/...
// decompresser et supprimer le fichier compresser aussi
tar xf <span class="hljs-keyword">node</span><span class="hljs-title">-v</span>...

// renomer en <span class="hljs-keyword">node</span>
<span class="hljs-title">mv</span> <span class="hljs-keyword">node</span><span class="hljs-title">-v</span>... <span class="hljs-keyword">node</span>

<span class="hljs-title">// creer</span> les lien
ln -s /var/www/<span class="hljs-keyword">node</span><span class="hljs-title">/bin</span>/<span class="hljs-keyword">node</span> <span class="hljs-title">/usr</span>/sbin
ln -s /var/www/<span class="hljs-keyword">node</span><span class="hljs-title">/bin</span>/npm /usr/sbin
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="desactiver-apache-ainsi-quau-demarrage"></a><a href="#desactiver-apache-ainsi-quau-demarrage" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Desactiver apache, ainsi qu'au demarrage</h4>
<pre><code class="hljs css language-shell">sudo /etc/init.d/apache2 stop
sudo systemctl disable apache2
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="désinstaller-libreoffice"></a><a href="#désinstaller-libreoffice" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Désinstaller LibreOffice</h4>
<pre><code class="hljs css language-shell">sudo apt-get remove --purge libreoffice*
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="installer-docker"></a><a href="#installer-docker" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installer Docker</h4>
<pre><code class="hljs css language-Shell">curl -sSL get.docker.com | sh
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="web"></a><a href="#web" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Web</h2>
<h2><a class="anchor" aria-hidden="true" id="monitoring"></a><a href="#monitoring" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Monitoring</h2>
<h3><a class="anchor" aria-hidden="true" id="pm2"></a><a href="#pm2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>PM2</h3>
<pre><code class="hljs css language-batch">npm <span class="hljs-keyword">install</span> pm2 -g
</code></pre>
<p>demander a pm2 de ce lancer au demarrage du raspberry</p>
<pre><code class="hljs css language-batch">p<span class="hljs-name">m2</span> startup
</code></pre>
<p>monitorer le serveur complet</p>
<pre><code class="hljs css language-batch">pm2 <span class="hljs-keyword">install</span> pm2-<span class="hljs-keyword">server</span>-monit
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="netdata"></a><a href="#netdata" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Netdata</h3>
<p>Supervision en temp réel</p>
<pre><code class="hljs css language-Bash">bash &lt;(curl -Ss https://my-netdata.io/kickstart.sh)
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="ncdu"></a><a href="#ncdu" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ncdu</h3>
<p>Installer ncdu avec apt pour visualiser les fichiers trop volumineux</p>
<p>ce placer à la racine</p>
<pre><code class="hljs css language-Shell">ncdu -x
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="tmpreaper"></a><a href="#tmpreaper" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>tmpreaper</h3>
<p>Installer tmpreaper avec apt</p>
<p>lors de l'installation avec apt, il faut commenter la ligne showing dans le fichier etc/tmpreaper</p>
<h3><a class="anchor" aria-hidden="true" id="lnav"></a><a href="#lnav" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>lnav</h3>
<p>Analyser les log avec lnav installation simple avec apt</p>
<pre><code class="hljs css language-Shell">lnav /var/log/messages*

journalctl | lnav

journalctl -f | lnav

journalctl -o short-iso | lnav

journalctl -o json | lnav

journalctl -a -o json | lnav

journalctl -o json --output-fields=MESSAGE,PRIORITY,_PID,SYSLOG_IDENTIFIER,_SYSTEMD_UNIT | lnav
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="si-on-utilise-pas-journalctl-mais-les-log-normale"></a><a href="#si-on-utilise-pas-journalctl-mais-les-log-normale" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Si on utilise pas journalctl, mais les log normale</h3>
<p><strong>logrotate</strong> est déja présent sur les distribution linux, il permet d'effecctuer des actions de rotations et de compression sur les logs</p>
<p>Assurons-nous que cette ligne n'est pas commentez</p>
<pre><code class="hljs css language-Shell">cat /etc/logrotate.conf | grep "include"
</code></pre>
<p>Voici un exemple</p>
<pre><code class="hljs css language-Bash">/var/<span class="hljs-built_in">log</span>/mylogs/auth.log {
     su &lt;user&gt; &lt;group&gt;
     monthly
     rotate 3
     compress
     missingok
     create 644 &lt;user&gt; &lt;group&gt;
}

/var/<span class="hljs-built_in">log</span>/mylogs/errors.log {
     su &lt;user&gt; &lt;group&gt;
     monthly
     rotate 3
     compress
     missingok
     create 644 &lt;user&gt; &lt;group&gt;
}
</code></pre>
<ol>
<li><strong>monthly</strong> : la rotation se fait mensuellement</li>
<li><strong>rotate 3</strong> : le nombre de fichiers qu’on souhaite conserver</li>
<li><strong>compress</strong> : les anciens fichiers sont compressés</li>
<li><strong>missingok</strong> : ne considère pas l’absence du fichier comme une erreur</li>
<li><strong>create 644 root root</strong> : créer le fichier de log immédiatement après la rotation avec les droits adéquats</li>
</ol>
<p>Petite verification</p>
<pre><code class="hljs css language-Shell">logrotate --force /etc/logrotate.d/mylogs
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="ecouter-le-traffic"></a><a href="#ecouter-le-traffic" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ecouter le traffic</h3>
<pre><code class="hljs css language-Shell">iftop
</code></pre>
<pre><code class="hljs css language-Shell">nethogs
</code></pre>
<pre><code class="hljs css language-Shell">iptraf-ng
</code></pre>
<pre><code class="hljs css language-Shell">apt install sysstat
<span class="hljs-meta">
#</span><span class="bash"> Regarder la crontab</span>
cat /etc/cron.d/sysstat
<span class="hljs-meta">
#</span><span class="bash"> les fichiers générés</span>
ls /var/log/sa
<span class="hljs-meta">
#</span><span class="bash"> CPU</span>
sar -u
<span class="hljs-meta">
#</span><span class="bash"> Memoire</span>
sar -r
<span class="hljs-meta">
#</span><span class="bash"> Swap</span>
sar -W
<span class="hljs-meta">
#</span><span class="bash"> Etat des IO disque</span>
sar -b
<span class="hljs-meta">
#</span><span class="bash"> Entree sortie</span>
sar -d
<span class="hljs-meta">
#</span><span class="bash"> Une période</span>
sadf -s 05:00:01 -e 06:00:01 -dT /var/log/sa/sa15 -- -A
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="installer-pyhton-pour-du-machine-learning"></a><a href="#installer-pyhton-pour-du-machine-learning" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installer Pyhton pour du machine learning</h2>
<pre><code class="hljs css language-Shell">curl -LO "https://repo.anaconda.com/miniconda/Miniconda2-4.7.12.1-Linux-x86_64.sh"
</code></pre>
<p><strong>path</strong> correspond à notre repertoire de travail exemple : <code>/maboite/miniconda3</code></p>
<pre><code class="hljs css language-Shell">sh Miniconda2-4.7.12.1-Linux-x86_64.sh -b -p &lt;path&gt;
</code></pre>
<pre><code class="hljs css language-Shell">conda install -y "jupyter" "numpy" "pandas"
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="intimité-sous-batch"></a><a href="#intimité-sous-batch" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Intimité sous BATCH</h2>
<pre><code class="hljs css language-BATCH"><span class="hljs-built_in">history</span>
</code></pre>
<p>supprimer une ligne génante</p>
<pre><code class="hljs css language-BATCH"><span class="hljs-built_in">history</span> -d numeroligne
</code></pre>
<p>Tout nettoyer</p>
<pre><code class="hljs css language-BATCH"><span class="hljs-built_in">history</span> -c
</code></pre>
<p>Si je veux l'historique sans les ligne de commande ls -l</p>
<pre><code class="hljs css language-BATCH"><span class="hljs-builtin-name">export</span> <span class="hljs-attribute">HISTIGNORE</span>=<span class="hljs-string">'ls -l:pwd:history'</span>
</code></pre>
<p>tout l'historique sont sauvegardé ici</p>
<p><code>/home/yourname/.bash_history</code></p>
<p><em>ctrl+r</em> permet de faire une recherche dans les lignes de commande tapé</p>
<h3><a class="anchor" aria-hidden="true" id="system-monitoring"></a><a href="#system-monitoring" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>System Monitoring</h3>
<pre><code class="hljs css language-Shell">df -h
top
dmesg
iostat 1
free
cat /proc/cpuinfo
cat /proc/meminfo
</code></pre>
<p>Installer <code>ncdu</code> avec apt pour visualiser les fichiers trop volumineux</p>
<p>ce placer à la racine</p>
<pre><code class="hljs css language-shell">ncdu -x
</code></pre>
<p>Installer <code>tmpreaper</code> avec apt</p>
<blockquote>
<p>lors de l'installation avec apt, il faut commenter la ligne showing dans le fichier etc/tmpreaper</p>
</blockquote>
<p>Analyser les log avec <code>lnav</code> installation simple avec apt</p>
<pre><code class="hljs css language-Shell">lnav /var/log/messages*

journalctl | lnav

journalctl -f | lnav

journalctl -o short-iso | lnav

journalctl -o json | lnav

journalctl -a -o json | lnav

journalctl -o json --output-fields=MESSAGE,PRIORITY,_PID,SYSLOG_IDENTIFIER,_SYSTEMD_UNIT | lnav
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="suppression"></a><a href="#suppression" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Suppression</h3>
<p>Il peux arriver qu'un dossier comporte tellement de fichier que vider le dossier deviens impossible meme avec un rm</p>
<pre><code class="hljs css language-Shell">find . -name "*.toto" -exec rm {} \;
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="rechercher"></a><a href="#rechercher" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rechercher</h3>
<p>Rechercher une chaine de caractère dans tout les fichiers du repertoire courant</p>
<pre><code class="hljs css language-Shell">grep -rnw './' -e 'machainearechercher'
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="wildcard"></a><a href="#wildcard" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Wildcard</h3>
<p>Cette ligne de commande creer 9 fichiers</p>
<pre><code class="hljs css language-Shell">touch abcd{1..9}-wyz
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="afficher-un-message-à-chaque-connexion"></a><a href="#afficher-un-message-à-chaque-connexion" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Afficher un message à chaque connexion</h3>
<p>Pour afficher un message il faudra l'écrire la dedans</p>
<p>/etc/motd</p>
<h3><a class="anchor" aria-hidden="true" id="process-and-jobs"></a><a href="#process-and-jobs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Process and Jobs</h3>
<p>systemctl
ps -aux
top
crontab -e pour creer un crontab
crontab -l pour lister les crontab</p>
<p>on peux definir plus facilement les cron dans /etc/</p>
<p>ls -l | grep cron</p>
<h3><a class="anchor" aria-hidden="true" id="process-management"></a><a href="#process-management" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Process Management</h3>
<p>Crtl-z, jobs, bg, fg, nohup &amp;, ps, pkill, nice</p>
<h3><a class="anchor" aria-hidden="true" id="bloquer-les-connexions-utiliateurs"></a><a href="#bloquer-les-connexions-utiliateurs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Bloquer les connexions utiliateurs</h3>
<p>Pour afficher un message il faudra ce deplacer ici</p>
<blockquote>
<p>/etc/nologin</p>
</blockquote>
<pre><code class="hljs css language-Shell">cat nologin
</code></pre>
<p>Ecrire votre message</p>
<h3><a class="anchor" aria-hidden="true" id="changer-mot-de-passe"></a><a href="#changer-mot-de-passe" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Changer mot de passe</h3>
<pre><code class="hljs css language-Shell">passwd
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="commande-sed"></a><a href="#commande-sed" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Commande sed</h3>
<p>Remplacer tout les mots <code>ancien</code> par les mots <code>nouveau</code> du fichier <code>MonFichier</code></p>
<pre><code class="hljs css language-Shell">sed 's/ancien/nouveau/g' MonFichier
</code></pre>
<p>Rajouter l'argument -i pour que cela soit actif</p>
<pre><code class="hljs css language-Shell">sed -i 's/ancien/nouveau/g' MonFichier
</code></pre>
<p>Supprimer toutes les lignes dans le fichier contenant le mot <code>ancien</code> dans <code>MonFichier</code></p>
<pre><code class="hljs css language-Shell">sed '/ancien/d' MonFichier
</code></pre>
<p>Supprimer toutes les lignes vide dans <code>MonFichier</code></p>
<pre><code class="hljs css language-Shell">sed -i '/^$/d' MonFichier
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="tester-le-chiffrement-tlsssl-ou-service-en-ligne-starttls"></a><a href="#tester-le-chiffrement-tlsssl-ou-service-en-ligne-starttls" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tester le chiffrement TLS/SSL ou service en ligne (STARTTLS)</h3>
<pre><code class="hljs css language-BATCH">git clone –depth <span class="hljs-number">1</span> http<span class="hljs-variable">s:</span>//github.<span class="hljs-keyword">com</span>/drwetter/testssl.<span class="hljs-keyword">sh</span>.git
<span class="hljs-keyword">cd</span> testssl.<span class="hljs-keyword">sh</span>
./testssl.<span class="hljs-keyword">sh</span> http<span class="hljs-variable">s:</span>//qwant.<span class="hljs-keyword">com</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="tableau-bord-serveur"></a><a href="#tableau-bord-serveur" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tableau bord serveur</h3>
<p>Surveillez son linux en temp réel sur l'adresse <a href="htt://127.0.0.1:19999">htt://127.0.0.1:19999</a></p>
<pre><code class="hljs css language-BATCH">bash &lt;(<span class="hljs-name">curl</span> -Ss https<span class="hljs-symbol">://my-netdata</span>.io/kickstart.sh)
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="detecter-le-traffic-malicieux"></a><a href="#detecter-le-traffic-malicieux" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Detecter le traffic malicieux</h3>
<p><a href="https://github.com/stamparm/maltrail">https://github.com/stamparm/maltrail</a></p>
<h3><a class="anchor" aria-hidden="true" id="mise-à-jour"></a><a href="#mise-à-jour" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Mise à jour</h3>
<p>Mise a jour</p>
<pre><code class="hljs css language-SHELL">apt-get update
apt-get upgrade
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="voir-les-paquets-installé"></a><a href="#voir-les-paquets-installé" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Voir les paquets installé</h3>
<pre><code class="hljs css language-SHELL">dpkg -l | grep paquet_recherché
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="système-log-monitor"></a><a href="#système-log-monitor" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Système log monitor</h3>
<p>Voir les log</p>
<pre><code class="hljs css language-SHELL">cd var/log

ls -ltr
ll | more
</code></pre>
<p>Voir les log de demarrage toujours dans <code>var/log</code></p>
<pre><code class="hljs css language-SHELL">more boot.log
</code></pre>
<p>voir quand est-ce que boot.log a été modifié</p>
<pre><code class="hljs css language-SHELL">ls -l boot.log
</code></pre>
<p>voir les log du matériel</p>
<pre><code class="hljs css language-SHELL">dmesg
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="utilisateur"></a><a href="#utilisateur" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Utilisateur</h3>
<p>Creer l'utilisateur <code>toto</code> et l'ajouter au group sudo</p>
<pre><code class="hljs css language-SHELL">useradd toto
usermod -aG sudo toto
</code></pre>
<p>Supprimer un utilisateur</p>
<pre><code class="hljs css language-SHELL">userdel -r toto
</code></pre>
<p>Chercher toto dans /etc/group</p>
<pre><code class="hljs css language-SHELL">grep toto /etc/group
</code></pre>
<p>Creer un groupe TEST</p>
<pre><code class="hljs css language-SHELL">groupadd TEST
</code></pre>
<p>Voir la liste de tout les groupes</p>
<pre><code class="hljs css language-SHELL">cat /etc/group/
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="rsync"></a><a href="#rsync" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>rsync</h3>
<p>Synchroniser deux repertoire sur un serveur local</p>
<pre><code class="hljs css language-BATCH">rsync -zvr <span class="hljs-regexp">/var/</span>opt<span class="hljs-regexp">/installation/i</span>nventory <span class="hljs-regexp">/root/</span>temp
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="partage-de-fichier-windows"></a><a href="#partage-de-fichier-windows" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Partage de fichier Windows</h3>
<p>Creer un groupe sharing</p>
<pre><code class="hljs css language-Shell">addgroup --system sharing
</code></pre>
<p>Creer un groupe utilisateur sharing appartenant au groupe sharing</p>
<pre><code class="hljs css language-Shell">adduser --system sharing --ingroup sharing
</code></pre>
<p>Mot de passe</p>
<pre><code class="hljs css language-Shell">passwd sharing
</code></pre>
<p>Creer un repertoire partagé</p>
<pre><code class="hljs css language-Shell">mkdir /home/sharing/public
chmod 777 /home/sharing/public
</code></pre>
<p>Installer Samba</p>
<pre><code class="hljs css language-Shell">apt update &amp;&amp; apt install samba -y

sudo rm /etc/samba/smb.conf
sudo nano /etc/samba/smb.conf
</code></pre>
<p>Copier dans le fichier</p>
<pre><code class="hljs css language-Shell">[global]
        netbios name = server
        server string = server
        workgroup = WORKGROUP
        security = user

[server]
        comment = server
        path = "/home/sharing/public"
        public = yes
        guest ok = yes
        read only = no
</code></pre>
<pre><code class="hljs css language-Shell">sudo pdbedit -a -u guest
sudo service smbd restart
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="exécuter-une-ligne-de-commande-sur-une-liste-de-serveur"></a><a href="#exécuter-une-ligne-de-commande-sur-une-liste-de-serveur" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exécuter une ligne de commande sur une liste de serveur</h3>
<p>On recupére l'espace disque sur tout les serveurs</p>
<pre><code class="hljs css language-Shell">sudo apt-get install python-pip
sudo pip install pssh

pssh -h pssh-hosts -l root -A -i "df -hT"
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="recupération-de-disque-dur"></a><a href="#recupération-de-disque-dur" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Recupération de disque dur</h3>
<p>Recupérer <a href="http://www.garloff.de/kurt/linux/ddrescue/">dd_rescue</a></p>
<p>Décompressez, puis make pour créer le binaire</p>
<p>Si le disque enfommagé est /dev/sdb1
Si le disque libre est /dev/sdc1</p>
<p>Information du disque</p>
<pre><code class="hljs css language-BATCH"><span class="hljs-attribute">fdisk -l</span>
</code></pre>
<p>Se placer dans le repertoire dd_rescue</p>
<pre><code class="hljs css language-BATCH">dd_rescue -l transfert_errors.log <span class="hljs-regexp">/dev/</span>sdb1 <span class="hljs-regexp">/dev/</span>sdc1
</code></pre>
<p>Le fichier log va être créé et qui va lister les blocs qu'il n'a pas plus traiter</p>
<p>Choisisser un des lignes de commande ci-dessous selon votre système de fichiers</p>
<pre><code class="hljs css language-BATCH"><span class="hljs-selector-tag">fsck</span><span class="hljs-selector-class">.ext2</span>
<span class="hljs-selector-tag">fsck</span><span class="hljs-selector-class">.ext3</span>
<span class="hljs-selector-tag">fsck</span><span class="hljs-selector-class">.ext4</span>
<span class="hljs-selector-tag">fsck</span><span class="hljs-selector-class">.vfat</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="wsl-2"></a><a href="#wsl-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WSL 2</h2>
<h3><a class="anchor" aria-hidden="true" id="windows"></a><a href="#windows" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Windows</h3>
<p>PowerShell en admin</p>
<pre><code class="hljs css language-Shell">Enable-WindowsOptionalFeature -Online -NoRestart -FeatureName VirtualMachinePlatform
Enable-WindowsOptionalFeature -Online -NoRestart -FeatureName Microsoft-Windows-Subsystem-Linux
Restart-Computer

wsl --list
wsl --set-version Ubuntu 2
wsl ~ -d Ubuntu
</code></pre>
<p>Installer <a href="https://sourceforge.net/projects/vcxsrv/">VcXsrv</a> choisir <strong>One Large Windows</strong></p>
<p>Choisir une distribution</p>
<ul>
<li>Ubuntu 16.04 LTS</li>
<li>Ubuntu 18.04 LTS</li>
<li>OpenSUSE Leap 15</li>
<li>OpenSUSE Leap 42</li>
<li>SUSE Linux Enterprise Server 12</li>
<li>SUSE Linux Enterprise Server 15</li>
<li>Kali Linux</li>
<li>Debian GNU/Linux</li>
<li>Fedora Remix pour WSL</li>
<li>Pengwin</li>
<li>Pengwin Enterprise</li>
<li>Alpine WSL</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="wsl"></a><a href="#wsl" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WSL</h3>
<pre><code class="hljs css language-Shell">sudo apt-get install xfce4
</code></pre>
<p>Lancer</p>
<pre><code class="hljs css language-Shell">xfce4-session --display=:0.0
</code></pre>
<p>Ouvrir l'explorateur windows</p>
<pre><code class="hljs css language-Shell">explorer.exe .
</code></pre>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#structure-de-dossier">Structure de dossier</a></li><li><a href="#installation-raspberry">Installation (Raspberry)</a><ul class="toc-headings"><li><a href="#formatter-la-sd">Formatter la SD</a></li><li><a href="#preparer-la-sd">Preparer la SD</a></li><li><a href="#configurer-le-wifi-et-ssh-en-avance">Configurer le wifi et ssh en avance</a></li></ul></li><li><a href="#fixer-une-adresse-ip">Fixer une adresse IP</a></li><li><a href="#mettre-le-clavier-en-français">Mettre le clavier en français</a></li><li><a href="#mettre-à-jour-le-système">Mettre à jour le système</a></li><li><a href="#changer-le-hostname">Changer le hostname</a></li><li><a href="#connexion-avec-clée-ssh">Connexion avec clée SSH</a></li><li><a href="#vscode-server-ne-fonctionne-pas-sur-des-architectures-arm">VSCODE server (ne fonctionne pas sur des architectures arm)</a><ul class="toc-headings"><li><a href="#acces-à-distance">Acces à distance</a></li></ul></li><li><a href="#web">Web</a></li><li><a href="#monitoring">Monitoring</a><ul class="toc-headings"><li><a href="#pm2">PM2</a></li><li><a href="#netdata">Netdata</a></li><li><a href="#ncdu">ncdu</a></li><li><a href="#tmpreaper">tmpreaper</a></li><li><a href="#lnav">lnav</a></li><li><a href="#si-on-utilise-pas-journalctl-mais-les-log-normale">Si on utilise pas journalctl, mais les log normale</a></li><li><a href="#ecouter-le-traffic">ecouter le traffic</a></li></ul></li><li><a href="#installer-pyhton-pour-du-machine-learning">Installer Pyhton pour du machine learning</a></li><li><a href="#intimité-sous-batch">Intimité sous BATCH</a><ul class="toc-headings"><li><a href="#system-monitoring">System Monitoring</a></li><li><a href="#suppression">Suppression</a></li><li><a href="#rechercher">Rechercher</a></li><li><a href="#wildcard">Wildcard</a></li><li><a href="#afficher-un-message-à-chaque-connexion">Afficher un message à chaque connexion</a></li><li><a href="#process-and-jobs">Process and Jobs</a></li><li><a href="#process-management">Process Management</a></li><li><a href="#bloquer-les-connexions-utiliateurs">Bloquer les connexions utiliateurs</a></li><li><a href="#changer-mot-de-passe">Changer mot de passe</a></li><li><a href="#commande-sed">Commande sed</a></li><li><a href="#tester-le-chiffrement-tlsssl-ou-service-en-ligne-starttls">Tester le chiffrement TLS/SSL ou service en ligne (STARTTLS)</a></li><li><a href="#tableau-bord-serveur">Tableau bord serveur</a></li><li><a href="#detecter-le-traffic-malicieux">Detecter le traffic malicieux</a></li><li><a href="#mise-à-jour">Mise à jour</a></li><li><a href="#voir-les-paquets-installé">Voir les paquets installé</a></li><li><a href="#système-log-monitor">Système log monitor</a></li><li><a href="#utilisateur">Utilisateur</a></li><li><a href="#rsync">rsync</a></li><li><a href="#partage-de-fichier-windows">Partage de fichier Windows</a></li><li><a href="#exécuter-une-ligne-de-commande-sur-une-liste-de-serveur">Exécuter une ligne de commande sur une liste de serveur</a></li><li><a href="#recupération-de-disque-dur">Recupération de disque dur</a></li></ul></li><li><a href="#wsl-2">WSL 2</a><ul class="toc-headings"><li><a href="#windows">Windows</a></li><li><a href="#wsl">WSL</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/me/" class="nav-home"><img src="/me/img/favicon.ico" alt="Kevin Grondin" width="66" height="58"/></a><div><h5>Docs</h5></div><div><h5>Community</h5></div><div><h5>More</h5></div></section></footer></div></body></html>